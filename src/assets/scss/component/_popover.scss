/**
 * popover
 * 主にツールチップ用
 */

@use '../foundation' as *;

[popover] {
	border: none;
	background: transparent;
	overflow: visible;
	padding: 0;
}

.c-popbox {
	// 配置とサイズ
	position-area: top span-right;
	margin: 0.75em 0;
	max-width: rem(320);
	width: max-content;

	// デザイン（グラスモーフィズム）
	background-color: rgba(20, 20, 30, 0.75); // ダークな半透明背景
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
	border: 1px solid $color-white;
	border-radius: $border-radius-sm;
	box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
	0 2px 4px -1px rgba(0, 0, 0, 0.06),
	0 0 0 1px rgba(255, 255, 255, 0.05) inset;

	// テキスト
	color: $color-white;
	padding: $spacing-2;
	font-size: $font-size-sm;
	line-height: $line-height-relaxed;
	letter-spacing: 0.02em;

	// アニメーション初期状態
	opacity: 0;
	transform: translateY(5px) scale(0.98);
	transition: opacity 0.2s ease,
	transform 0.2s cubic-bezier(0.2, 0, 0.2, 1),
	display 0.2s allow-discrete,
	overlay 0.2s allow-discrete;

	// 表示状態
	&:popover-open {
		opacity: 1;
		transform: translateY(0) scale(1);

		@starting-style {
			opacity: 0;
			transform: translateY(5px) scale(0.98);
		}
	}

	// リンクスタイル
	a {
		color: $color-primary;
		text-decoration: none;
		font-weight: $font-weight-medium;
		border-bottom: 1px solid transparent;
		transition: border-color 0.2s ease;

		&:hover {
			border-bottom-color: currentColor;
		}
		}

	// リストスタイル（箇条書きなど）
	ul {
		margin-top: $spacing-2;
		padding-left: 1.2em;
		list-style-type: disc;

		li {
			margin-bottom: $spacing-1;

			&::marker {
				color: $color-primary;
			}
		}
	}
}

// 吹き出しの矢印（CSS三角形）
.c-badge--popover:has(+ .c-popbox:popover-open)::after {
	content: "";
	position: absolute;
	right: 0.8em;
	top: -0.8em; // 位置調整

	// 三角形作成
	border-left: 0.6em solid transparent;
	border-right: 0.6em solid transparent;
	border-bottom: 0.8em solid rgba(20, 20, 30, 0.85); // 背景色と合わせる

	// アニメーション
	opacity: 0;
	transform: translateY(5px);
	animation: popover-arrow-in 0.2s forwards;
	}

	@keyframes popover-arrow-in {
		from {
			opacity: 0;
			transform: translateY(5px);
		}

		to {
			opacity: 1;
			transform: translateY(0);
		}
}